id: tmdb_movies_example
label: 'Import Top 10 Movies from TMDb'
migration_group: tmdb_movies
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: json
  urls: 'https://api.themoviedb.org/3/movie/top_rated?language=en-US&page=1'
  headers:
    Authorization: 'Bearer [key:key-name:tmdb]'
  item_selector: '[results]'
  fields:
    - name: id
      label: 'TMDb ID'
    - name: original_title
      label: 'Title'
    - name: overview
      label: 'Overview'
    - name: poster_path
      label: 'Poster URL'
    - name: release_date
      label: 'Release Date'
    - name: vote_average
      label: 'Vote Average'
  ids:
    id:
      type: integer
process:
  title: original_title
  field_tmdb_id: id
  field_overview/value: overview
  field_overview/format: 'basic_html'
  field_release_date: release_date
  field_vote_average: vote_average
  field_poster:
    plugin: file_import
    source: poster_path
destination:
  plugin: entity:node
  default_bundle: movies
  default_langcode: en
  uid: 1
  status: 1
migration_tags:
  - TMDb
dependencies: {}
